<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>LexGestión</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0b1220;
  color: #e5e7eb;
}

header {
  background: #070d1a;
  padding: 15px 20px;
  font-size: 20px;
  font-weight: bold;
  border-bottom: 1px solid #1f2a44;
}

main {
  padding: 20px;
  max-width: 1200px;
  margin: auto;
}

h2 {
  font-size: 14px;
  text-transform: uppercase;
  color: #9ca3af;
  margin-bottom: 8px;
}

.grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 16px;
}

.card {
  background: #0f1b2d;
  border: 1px solid #1f2a44;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}

input, button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  font-size: 14px;
}

input {
  background: #081226;
  border: 1px solid #1f2a44;
  color: white;
}

button {
  background: #2563eb;
  border: none;
  color: white;
  cursor: pointer;
}

ul {
  list-style: none;
  padding: 0;
  margin-top: 10px;
}

li {
  background: #081226;
  padding: 8px;
  margin-top: 6px;
  border-radius: 6px;
  font-size: 14px;
}
</style>
</head>

<body>

<header>LEXGESTIÓN</header>

<main>
  <div class="grid">

    <div>
      <div class="card">
        <h2>Vencimientos</h2>
        <input id="vencInput" placeholder="Nuevo vencimiento">
        <button onclick="agregar('vencimientos','vencInput')">Agregar</button>
        <ul id="vencimientos"></ul>
      </div>

      <div class="card">
        <h2>Audiencias</h2>
        <input id="audInput" placeholder="Nueva audiencia">
        <button onclick="agregar('audiencias','audInput')">Agregar</button>
        <ul id="audiencias"></ul>
      </div>

      <div class="card">
        <h2>Proyectos / Consultas</h2>
        <input id="projInput" placeholder="Nuevo proyecto">
        <button onclick="agregar('proyectos','projInput')">Agregar</button>
        <ul id="proyectos"></ul>
      </div>
    </div>

    <div>
      <div class="card">
        <h2>Agenda de calle</h2>
        <p>Sin tareas</p>
      </div>
    </div>

  </div>
</main>

<script>
let db;

const request = indexedDB.open("lexgestionDB", 1);

request.onupgradeneeded = e => {
  db = e.target.result;
  ["vencimientos", "audiencias", "proyectos"].forEach(store => {
    if (!db.objectStoreNames.contains(store)) {
      db.createObjectStore(store, { keyPath: "id", autoIncrement: true });
    }
  });
};

request.onsuccess = e => {
  db = e.target.result;
  cargarTodo();
};

function agregar(storeName, inputId) {
  const input = document.getElementById(inputId);
  const texto = input.value.trim();
  if (!texto) return;

  const tx = db.transaction(storeName, "readwrite");
  const store = tx.objectStore(storeName);
  store.add({ texto, fecha: new Date().toISOString() });

  tx.oncomplete = () => {
    input.value = "";
    cargar(storeName);
  };
}

function cargar(storeName) {
  const ul = document.getElementById(storeName);
  ul.innerHTML = "";

  const tx = db.transaction(storeName, "readonly");
  const store = tx.objectStore(storeName);
  store.openCursor().onsuccess = e => {
    const cursor = e.target.result;
    if (cursor) {
      const li = document.createElement("li");
      li.textContent = cursor.value.texto;
      ul.appendChild(li);
      cursor.continue();
    }
  };
}

function cargarTodo() {
  ["vencimientos", "audiencias", "proyectos"].forEach(cargar);
}
</script>

</body>
</html>
